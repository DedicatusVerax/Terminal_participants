<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FIELD TERMINAL // OPERATION BLACK ICE</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #050b14; /* Darker than organizer view */
            color: #94a3b8;
        }
        h1, h2, h3, h4, .mono-font {
            font-family: 'JetBrains Mono', monospace;
        }
        /* Neon Effects */
        .neon-text-green {
            color: #4ADE80;
            text-shadow: 0 0 10px rgba(74, 222, 128, 0.5);
        }
        .neon-border-green {
            border-color: #4ADE80;
            box-shadow: 0 0 8px rgba(74, 222, 128, 0.2);
        }
        .neon-text-red {
            color: #F87171;
            text-shadow: 0 0 10px rgba(248, 113, 113, 0.5);
        }
        
        /* Checkbox Styling */
        .custom-checkbox input:checked + div {
            background-color: #4ADE80;
            border-color: #4ADE80;
        }
        .custom-checkbox input:checked + div svg {
            display: block;
        }
        
        /* Chart Container */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 400px;
            margin: 0 auto;
            height: 250px;
        }

        /* Flow Diagram Lines */
        .flow-line {
            width: 2px;
            background-color: #334155;
            margin: 0 auto;
            height: 20px;
        }
        .flow-line-h {
            height: 2px;
            background-color: #334155;
        }
    </style>
    <!-- 
    Palette: Terminal Ops
    Background: #050b14
    Primary (Success/Terminal): #4ADE80 (Green)
    Secondary (Alert): #F87171 (Red)
    Neutral: #94a3b8 (Slate)
    -->
</head>
<body class="antialiased selection:bg-green-900 selection:text-white pb-20">

    <!-- TOP BAR -->
    <header class="w-full bg-slate-900/80 border-b border-green-900/30 sticky top-0 z-50 backdrop-blur-md">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="h-3 w-3 rounded-full bg-green-500 animate-pulse"></div>
                <div>
                    <h1 class="text-xl font-bold neon-text-green tracking-tighter">AGENCY TERMINAL</h1>
                    <p class="text-[10px] text-green-800 mono-font uppercase">Secure Connection // V.2.0.4</p>
                </div>
            </div>
            <div class="text-right hidden md:block">
                <p class="text-xs text-slate-500 mono-font">OPERATIVE ID</p>
                <p class="text-sm font-bold text-white">GUEST_ACCESS</p>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 mt-8 grid grid-cols-1 lg:grid-cols-12 gap-8">

        <!-- LEFT COLUMN: STATUS & TRACKER (4 cols) -->
        <div class="lg:col-span-4 space-y-6">
            
            <!-- MISSION STATUS CARD -->
            <div class="bg-slate-900 border border-slate-800 rounded-lg p-6 shadow-lg">
                <h2 class="text-white font-bold mono-font mb-4 border-b border-slate-800 pb-2">MISSION STATUS</h2>
                
                <!-- Countdown -->
                <div class="mb-6 text-center bg-black rounded p-4 border border-slate-800">
                    <p class="text-xs text-slate-500 mb-1">SESSION TIMER</p>
                    <div class="text-3xl font-bold text-white mono-font" id="countdown">04:00:00</div>
                    <p class="text-[10px] text-red-500 mt-1 animate-pulse">DEADLINE APPROACHING</p>
                </div>

                <!-- Progress Chart -->
                <div class="mb-2 text-center">
                    <p class="text-xs text-slate-500 mb-2">COMPLETION RATE</p>
                    <div class="chart-container">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- COMMS CARD -->
            <div class="bg-slate-900 border-l-4 border-purple-500 rounded-lg p-6 shadow-lg">
                <div class="flex justify-between items-start">
                    <div>
                        <h3 class="text-white font-bold mono-font">SECURE COMMS</h3>
                        <p class="text-xs text-purple-400 mt-1">Handler: FROSTBITE</p>
                    </div>
                    <span class="text-2xl">üì±</span>
                </div>
                <div class="mt-4 bg-slate-800/50 p-3 rounded text-xs mono-font text-slate-300">
                    <p>> USE SIGNAL APP</p>
                    <p>> ID VERIFICATION REQUIRED</p>
                    <p>> CODEWORD: "GLACIER"</p>
                </div>
            </div>

            <!-- TOOLBOX LINKS -->
            <div class="grid grid-cols-2 gap-4">
                <a href="https://gchq.github.io/CyberChef/" target="_blank" class="block bg-slate-800 hover:bg-slate-700 p-4 rounded border border-slate-700 text-center transition">
                    <span class="text-2xl block mb-2">üî™</span>
                    <span class="text-xs font-bold text-white">CyberChef</span>
                </a>
                <a href="https://exif.regex.info/exif.cgi" target="_blank" class="block bg-slate-800 hover:bg-slate-700 p-4 rounded border border-slate-700 text-center transition">
                    <span class="text-2xl block mb-2">üì∑</span>
                    <span class="text-xs font-bold text-white">ExifTool</span>
                </a>
                <a href="https://www.google.com/maps" target="_blank" class="block bg-slate-800 hover:bg-slate-700 p-4 rounded border border-slate-700 text-center transition">
                    <span class="text-2xl block mb-2">üó∫Ô∏è</span>
                    <span class="text-xs font-bold text-white">Maps</span>
                </a>
                <a href="https://stylesuxx.github.io/steganography/" target="_blank" class="block bg-slate-800 hover:bg-slate-700 p-4 rounded border border-slate-700 text-center transition">
                    <span class="text-2xl block mb-2">üñºÔ∏è</span>
                    <span class="text-xs font-bold text-white">Stego</span>
                </a>
            </div>

        </div>

        <!-- RIGHT COLUMN: MAIN CONTENT (8 cols) -->
        <div class="lg:col-span-8 space-y-8">

            <!-- INTERACTIVE FLAG CHECKLIST -->
            <section class="bg-slate-900 border border-slate-800 rounded-lg p-6 lg:p-8 shadow-xl">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-white mono-font flex items-center">
                        <span class="text-green-500 mr-2">>>></span> OPERATIVE LOG
                    </h2>
                    <span class="text-xs text-slate-500 bg-slate-800 px-2 py-1 rounded">AUTO-SAVE ENABLED</span>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="flagList">
                    <!-- Javascript will populate this -->
                </div>
            </section>

            <!-- SPOILER-FREE INVESTIGATION BOARD -->
            <section class="bg-slate-900 border border-slate-800 rounded-lg p-6 lg:p-8 relative overflow-hidden">
                <!-- Grid Background -->
                <div class="absolute inset-0 opacity-5" style="background-image: linear-gradient(#4ADE80 1px, transparent 1px), linear-gradient(90deg, #4ADE80 1px, transparent 1px); background-size: 20px 20px;"></div>
                
                <h2 class="text-xl font-bold text-white mono-font mb-6 relative z-10">INVESTIGATION MAP</h2>

                <div class="relative z-10 flex flex-col items-center">
                    
                    <!-- START -->
                    <div class="border-2 border-slate-600 bg-slate-800 px-6 py-3 rounded text-center w-64">
                        <span class="text-xs text-slate-500 uppercase tracking-widest">START POINT</span>
                        <div class="text-white font-bold">ALEX MERCER (MISSING)</div>
                    </div>

                    <!-- CONNECTOR -->
                    <div class="flow-line"></div>
                    <div class="w-1/2 h-0.5 bg-slate-700"></div> <!-- Horizontal Split -->
                    <div class="flex justify-between w-1/2">
                        <div class="flow-line h-4 bg-cyan-800"></div>
                        <div class="flow-line h-4 bg-green-800"></div>
                    </div>

                    <!-- SPLIT -->
                    <div class="flex justify-between w-full max-w-2xl gap-4">
                        
                        <!-- DIGITAL PATH -->
                        <div class="flex-1 flex flex-col items-center">
                            <div class="border-l-2 border-cyan-500 bg-slate-800/50 p-4 rounded w-full text-center">
                                <div class="text-cyan-500 font-bold text-sm">DIGITAL TRAIL</div>
                                <div class="text-xs text-slate-400 mt-1">Web, Signals & Logs</div>
                            </div>
                            
                            <div class="flow-line h-4 border-l border-dashed border-slate-600"></div>
                            
                            <div class="border border-slate-700 bg-black p-3 rounded w-3/4 text-center opacity-70">
                                <div class="text-xs text-slate-500">ENCRYPTED DATA</div>
                                <div class="text-xs text-red-500">[ LOCKED ]</div>
                            </div>

                            <div class="flow-line h-4 border-l border-dashed border-slate-600"></div>

                            <div class="border border-slate-700 bg-black p-3 rounded w-3/4 text-center opacity-70">
                                <div class="text-xs text-slate-500">FORENSIC DUMP</div>
                                <div class="text-xs text-red-500">[ LOCKED ]</div>
                            </div>
                        </div>

                        <!-- PHYSICAL PATH -->
                        <div class="flex-1 flex flex-col items-center">
                            <div class="border-l-2 border-green-500 bg-slate-800/50 p-4 rounded w-full text-center">
                                <div class="text-green-500 font-bold text-sm">PHYSICAL TRAIL</div>
                                <div class="text-xs text-slate-400 mt-1">Geo-Location & Field Ops</div>
                            </div>

                            <div class="flow-line h-4 border-l border-dashed border-slate-600"></div>
                            
                            <div class="border border-slate-700 bg-black p-3 rounded w-3/4 text-center opacity-70">
                                <div class="text-xs text-slate-500">LOCATION DATA</div>
                                <div class="text-xs text-red-500">[ LOCKED ]</div>
                            </div>

                            <div class="flow-line h-4 border-l border-dashed border-slate-600"></div>

                            <div class="border border-slate-700 bg-black p-3 rounded w-3/4 text-center opacity-70">
                                <div class="text-xs text-slate-500">THE DROP</div>
                                <div class="text-xs text-red-500">[ REQUIRES FIELD TEAM ]</div>
                            </div>
                        </div>
                    </div>

                    <!-- MERGE -->
                    <div class="flex justify-between w-1/2 mt-4">
                        <div class="flow-line h-4 bg-slate-700"></div>
                        <div class="flow-line h-4 bg-slate-700"></div>
                    </div>
                    <div class="w-1/2 h-0.5 bg-slate-700"></div>
                    <div class="flow-line"></div>

                    <!-- END GAME -->
                    <div class="border-2 border-yellow-600 bg-slate-800 px-6 py-4 rounded text-center w-full max-w-md shadow-[0_0_15px_rgba(234,179,8,0.1)]">
                        <span class="text-xs text-yellow-500 uppercase tracking-widest">SYNTHESIS</span>
                        <div class="text-white font-bold text-lg">???</div>
                        <div class="text-xs text-slate-500 mt-1">Connect Digital Evidence + Physical Proof</div>
                    </div>

                </div>
            </section>

        </div>
    </main>

    <script>
        // --- CONFIGURATION ---
        
        // ‚è±Ô∏è TIMER INSTELLING (Pas dit getal aan voor de duur van de missie)
        const MISSION_DURATION_HOURS = 4; // Zet hier het aantal uren (bijv. 3, 4, of 2.5)

        const flags = [
            { id: 'f1', label: 'FLAG 01: Entry Point', category: 'Crypto' },
            { id: 'f2', label: 'FLAG 02: Web Access', category: 'Web' },
            { id: 'f3', label: 'FLAG 03: Profile Intel', category: 'OSINT' },
            { id: 'f4', label: 'FLAG 04: Contact Made', category: 'HUMINT' },
            { id: 'f5', label: 'FLAG 05: Hidden Data', category: 'Stego' },
            { id: 'f6', label: 'FLAG 06: Hardware Dump', category: 'Forensics' },
            { id: 'f7', label: 'FLAG 07: Version History', category: 'Git' },
            { id: 'f8', label: 'FLAG 08: Movement Tracking', category: 'OSINT' },
            { id: 'f9', label: 'FLAG 09: Encrypted Comms', category: 'Crypto' },
            { id: 'f10', label: 'FLAG 10: Dead Drop', category: 'Field Op' },
            { id: 'f11', label: 'FLAG 11: Surveillance', category: 'Metadata' },
            { id: 'f12', label: 'FLAG 12: Financial Trail', category: 'Blockchain' },
            { id: 'f13', label: 'FLAG 13: The Confession', category: 'PDF' },
            { id: 'f14', label: 'FLAG 14: Final Synthesis', category: 'Logic' }
        ];

        // --- DOM GENERATION ---
        const flagContainer = document.getElementById('flagList');
        
        // Generate Checkboxes
        flags.forEach(flag => {
            const div = document.createElement('div');
            div.className = "flex items-center p-3 bg-slate-800/50 rounded border border-slate-700 hover:border-slate-500 transition cursor-pointer";
            div.onclick = (e) => {
                // Toggle checkbox if clicking the div (UX improvement)
                if (e.target.type !== 'checkbox') {
                    const cb = document.getElementById(flag.id);
                    cb.click();
                }
            };

            div.innerHTML = `
                <label class="custom-checkbox flex items-center cursor-pointer w-full">
                    <input type="checkbox" id="${flag.id}" class="hidden" onchange="updateProgress()">
                    <div class="w-5 h-5 border-2 border-slate-500 rounded flex items-center justify-center mr-3 transition-colors">
                        <svg class="w-3 h-3 text-black hidden pointer-events-none" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg>
                    </div>
                    <div class="flex-1">
                        <div class="text-sm font-bold text-slate-200">${flag.label}</div>
                        <div class="text-[10px] text-slate-500 uppercase tracking-wider">${flag.category}</div>
                    </div>
                </label>
            `;
            flagContainer.appendChild(div);
        });

        // --- CHART JS SETUP ---
        const ctx = document.getElementById('progressChart').getContext('2d');
        const progressChart = new Chart(ctx, {
            type: 'doughnut',
            data: {
                labels: ['Completed', 'Remaining'],
                datasets: [{
                    data: [0, 14],
                    backgroundColor: ['#4ADE80', '#1e293b'],
                    borderWidth: 0,
                    hoverOffset: 0
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                cutout: '75%',
                plugins: {
                    legend: { display: false },
                    tooltip: { enabled: false }
                }
            },
            plugins: [{
                id: 'textCenter',
                beforeDraw: function(chart) {
                    var width = chart.width, height = chart.height, ctx = chart.ctx;
                    ctx.restore();
                    var fontSize = (height / 114).toFixed(2);
                    ctx.font = "bold " + fontSize + "em JetBrains Mono";
                    ctx.textBaseline = "middle";
                    ctx.fillStyle = "#ffffff";
                    
                    // Calculate percentage
                    const data = chart.data.datasets[0].data;
                    const total = data[0] + data[1];
                    const percent = Math.round((data[0] / total) * 100) + "%";
                    
                    var text = percent,
                        textX = Math.round((width - ctx.measureText(text).width) / 2),
                        textY = height / 2;
                    ctx.fillText(text, textX, textY);
                    ctx.save();
                }
            }]
        });

        // --- LOGIC ---
        function updateProgress() {
            let checkedCount = 0;
            flags.forEach(flag => {
                if (document.getElementById(flag.id).checked) {
                    checkedCount++;
                    // Visual styling for checked items
                    document.getElementById(flag.id).parentElement.parentElement.classList.add('border-green-500', 'bg-slate-800');
                    document.getElementById(flag.id).parentElement.parentElement.classList.remove('border-slate-700', 'bg-slate-800/50');
                } else {
                    document.getElementById(flag.id).parentElement.parentElement.classList.remove('border-green-500', 'bg-slate-800');
                    document.getElementById(flag.id).parentElement.parentElement.classList.add('border-slate-700', 'bg-slate-800/50');
                }
            });

            // Update Chart
            progressChart.data.datasets[0].data = [checkedCount, 14 - checkedCount];
            progressChart.update();
        }

        // --- COUNTDOWN TIMER (Visual Only) ---
        // Uses the MISSION_DURATION_HOURS setting from the top
        let time = MISSION_DURATION_HOURS * 60 * 60; // Convert hours to seconds
        const timerEl = document.getElementById('countdown');
        
        setInterval(() => {
            if (time > 0) {
                time--;
                const h = Math.floor(time / 3600).toString().padStart(2, '0');
                const m = Math.floor((time % 3600) / 60).toString().padStart(2, '0');
                const s = (time % 60).toString().padStart(2, '0');
                timerEl.innerText = `${h}:${m}:${s}`;
                
                // Color change when low
                if (time < 3600) timerEl.classList.add('text-red-500');
            }
        }, 1000);

    </script>
</body>
</html>
